<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src='http://d3js.org/d3.v3.min.js'></script>
</head>
<style>

    body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        width: 960px;
        height: 500px;
        position: relative;
    }

    path.slice{
        stroke-width:2px;
    }

    polyline{
        opacity: .3;
        stroke: black;
        stroke-width: 2px;
        fill: none;
    }

</style>

<body>


    <script type='text/javascript'>

        var width = 960,
                height = 500,
                radius = Math.min(width, height) / 2;

        var key;
        var color = d3.scale.ordinal()
                .range(["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]);
        var arc = d3.svg.arc()
                .outerRadius(radius - 10)
                .innerRadius(0);
        var pie = d3.layout.pie()
                .sort(null)
                .value(function(d) { return d.POP; });
        var svg = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");
        d3.csv("ageRanges.csv", function(error, data) {
            console.log(data);
            data.forEach(function (d) {
                d.POP = +d.POP;
                console.log(d.POP);
            });

            var g = svg.selectAll(".arc")
                    .data(pie(data))
                    .enter().append("g")
                    .attr("class", "arc");
            g.append("path")
                    .attr("d", arc)
                    .style("fill", function (d) {
                        return color(d.data.AGE);
                    });
            g.append("text")
                    .attr("transform", function (d) {
                        return "translate(" + arc.centroid(d) + ")";
                    })
                    .attr("dy", "-.35em")
                    .style("text-anchor", "middle")
                    .text(function (d) {
                        return d.data.AGE;
                    });
        });

    </script>



</body>
</html>